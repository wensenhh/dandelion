(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-modify-Login-password-modify-Login-password"],{"0ad7":function(t,e,a){"use strict";var o=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var s=o(a("1da1")),n=o(a("5bf5")),r=a("6076"),i=a("4d75"),d={data:function(){return{count:"",show:!0,updatePasswordInfo:{password:"",repassword:"",code:"",mobile:""}}},onLoad:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,r.getUser)();case 2:a=e.sent,1==a.code&&(t.updatePasswordInfo.mobile=a.data.mobile);case 4:case"end":return e.stop()}}),e)})))()},methods:{submitForm:function(){var t=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=[{name:"password",rule:["required","minLength:6","maxLength:16"],msg:["请输入新密码","输入密码最少6位","输入密码最多16位"]},{name:"repassword",rule:["required","minLength:6","maxLength:16"],msg:["请输入确认密码","输入确认密码最少6位","输入确认密码最多16位"]},{name:"code",rule:["required"],msg:["请输入验证码"]}],o=n.default.validation(t.updatePasswordInfo,a),o){e.next=13;break}if(t.updatePasswordInfo.password==t.updatePasswordInfo.repassword){e.next=6;break}return t.tui.toast("两次密码不一致哦"),e.abrupt("return",!1);case 6:return console.log(s),e.next=9,(0,i.forgetPwd)(t.updatePasswordInfo);case 9:s=e.sent,1==s.code?(t.tui.toast("提交成功"),t.logout()):1==s.show&&t.tui.toast(s.msg),e.next=14;break;case 13:t.tui.toast(o);case 14:case"end":return e.stop()}}),e)})))()},getCode:function(){var t=this;this.tui.request("/sms/send","POST",{mobile:this.updatePasswordInfo.mobile,key:"ZHMM"}).then((function(e){console.log(e,1==e.code),1==e.code?(t.codeTime(),t.tui.toast(e.msg)):1==e.show&&t.tui.toast(e.msg)})).catch((function(t){}))},codeTime:function(){var t=this,e=60;this.timer||(this.count=e,this.show=!1,this.timer=setInterval((function(){t.count>0&&t.count<=e?t.count--:(t.show=!0,clearInterval(t.timer),t.timer=null)}),1e3))},logout:function(){var t=this;this.tui.request("/account/logout","POST",{token:this.tui.getToken()}).then((function(e){console.log(e,1==e.code),1==e.code?(t.tui.logout(),uni.reLaunch({url:"/pages/tabbar/my/my"})):1==e.show&&t.tui.toast(e.msg)})).catch((function(t){}))}}};e.default=d},"4c08":function(t,e,a){var o=a("e029");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var s=a("4f06").default;s("3b23d096",o,!0,{sourceMap:!1,shadowMode:!1})},"76a9":function(t,e,a){"use strict";a.r(e);var o=a("aeaa"),s=a("80c7");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("8dff");var r,i=a("f0c5"),d=Object(i["a"])(s["default"],o["b"],o["c"],!1,null,"aab2d5c8",null,!1,o["a"],r);e["default"]=d.exports},"80c7":function(t,e,a){"use strict";a.r(e);var o=a("0ad7"),s=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e["default"]=s.a},"8dff":function(t,e,a){"use strict";var o=a("4c08"),s=a.n(o);s.a},aeaa:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o}));var o={tuiButton:a("2b3f").default},s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"tui-set-box"},[a("v-uni-view",{staticClass:"stylePassword"},[a("v-uni-text",[t._v("新密码")]),a("v-uni-view",{staticClass:"inputStyle"},[a("v-uni-input",{attrs:{type:"password",placeholder:"设置新密码",name:"nowPwd"},model:{value:t.updatePasswordInfo.password,callback:function(e){t.$set(t.updatePasswordInfo,"password",e)},expression:"updatePasswordInfo.password"}})],1)],1),a("v-uni-view",{staticClass:"stylePassword"},[a("v-uni-text",[t._v("确认密码")]),a("v-uni-view",{staticClass:"inputStyle"},[a("v-uni-input",{attrs:{type:"password",placeholder:"再次输入新密码",name:"confirmPwd"},model:{value:t.updatePasswordInfo.repassword,callback:function(e){t.$set(t.updatePasswordInfo,"repassword",e)},expression:"updatePasswordInfo.repassword"}})],1)],1),a("v-uni-view",{staticClass:"stylePassword"},[a("v-uni-text",[t._v("验证码")]),a("v-uni-view",{staticClass:"inputStyle-code"},[a("v-uni-input",{attrs:{type:"number",placeholder:"输入验证码",name:"code"},model:{value:t.updatePasswordInfo.code,callback:function(e){t.$set(t.updatePasswordInfo,"code",e)},expression:"updatePasswordInfo.code"}})],1),a("v-uni-button",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode.apply(void 0,arguments)}}},[t._v("获取验证码")]),a("v-uni-button",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode.apply(void 0,arguments)}}},[t._v(t._s(t.count)+"s")])],1),a("v-uni-view",{staticClass:"btnSure",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitForm.apply(void 0,arguments)}}},[a("tui-button",{attrs:{height:"90rpx",size:34,type:"green",shape:"circle"}},[t._v("提交")])],1)],1)},n=[]},e029:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,"uni-page-body[data-v-aab2d5c8]{background-color:#fff}.tui-set-box[data-v-aab2d5c8]{padding:%?30?%;color:#333}.stylePassword[data-v-aab2d5c8]{display:flex;padding:%?25?% %?0?%}.stylePassword uni-text[data-v-aab2d5c8]{color:#2c2d2c;font-size:%?32?%;line-height:%?100?%;width:%?150?%}.stylePassword .inputStyle-code[data-v-aab2d5c8]{width:%?296?%;border:#f6f6f6 solid %?1?%;margin-left:%?24?%;padding:%?24?%;background-color:#f6f6f6;border-radius:%?20?%}.stylePassword uni-button[data-v-aab2d5c8]{width:%?200?%;height:%?60?%;line-height:%?60?%;background-color:#f73037;border-radius:%?5?%;font-size:%?26?%;color:#fff;margin-top:%?20?%}.stylePassword .inputStyle[data-v-aab2d5c8]{width:%?496?%;border:#f6f6f6 solid %?1?%;margin-left:%?24?%;padding:%?24?%;background-color:#f6f6f6;border-radius:%?20?%}.btnSure[data-v-aab2d5c8]{position:fixed;bottom:%?64?%;width:90%}body.?%PAGE?%[data-v-aab2d5c8]{background-color:#fff}",""]),t.exports=e}}]);